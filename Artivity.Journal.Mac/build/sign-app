#!/bin/bash

function show_help (){
	echo "Signs the app with the stored key.
Options:
Example: sign-app -d=../../build/Debug/test.app/Contents/Frameworks/Sparkle.framework "
}


for i in "$@"
do
case $i in
    -h|--help)
	show_help
	exit
	;;
    -d=*|--dir=*)
    DIR="${i#*=}"
    shift # past argument=value
    ;;
    *)
            # unknown option
    ;;
esac
done



# grab code signing id from the keychain
codeSignID=$(security find-identity -v -p codesigning | grep ".*Developer ID Application: Semiodesk GmbH.*" | awk -F'"' '$0=$2' )
echo ${codeSignID}
# codesign all frameworks including sparkle
codesign --verbose --force --sign "${codeSignID}" "${DIR}"





# End of file
