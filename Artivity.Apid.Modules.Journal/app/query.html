<!doctype html>
<html ng-app="explorerApp">

<head>
	<meta name="viewport" content="width=device-width,initial-scale=1">

	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="bower_components/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">
	<link rel="stylesheet" href="bower_components/bootstrap-switch/dist/css/bootstrap3/bootstrap-switch.min.css">
	<link rel="stylesheet" href="bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css">
	<link rel='stylesheet' href='bower_components/font-roboto/dist/styles/roboto.min.css' type='text/css'>
	<link rel='stylesheet' href='bower_components/angular-hotkeys/build/hotkeys.min.css' type='text/css'>
	<link rel='stylesheet' href='bower_components/yasgui/dist/yasgui.min.css' type='text/css' />
	<link rel="stylesheet" href="css/style.css">

	<script src="bower_components/jquery/dist/jquery.min.js"></script>
	<script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
	<script src="bower_components/jquery-ui/ui/widgets/draggable.js"></script>
	<script src="bower_components/jquery-ui/ui/widgets/resizable.js"></script>
	<script src="bower_components/moment/moment.js"></script>
	<script src="bower_components/moment-duration-format/lib/moment-duration-format.js"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="bower_components/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
	<script src="bower_components/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>
	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/angular-animate/angular-animate.min.js"></script>
	<script src="bower_components/angular-translate/angular-translate.min.js"></script>
	<script src="bower_components/angular-route/angular-route.min.js"></script>
	<script src="bower_components/angular-hotkeys/build/hotkeys.min.js"></script>
	<script src="bower_components/angular-input-modified/dist/angular-input-modified.min.js"></script>
	<script src="bower_components/angular-ui/build/angular-ui.min.js"></script>
	<script src="bower_components/angular-bootstrap/ui-bootstrap.min.js"></script>
	<script src="bower_components/angular-moment/angular-moment.min.js"></script>
	<script src="bower_components/base64/base64.min.js"></script>
	<script src="bower_components/d3/d3.min.js"></script>
	<script src='bower_components/yasgui/dist/yasgui.min.js'></script>
	<script src="js/lib/quantize.js"></script>
	<script src="js/lib/d3-timeline.js"></script>

	<script src="js/app.conf.js"></script>
	<script src="js/app.js"></script>
	<script src="js/app.api.js"></script>
	<script src="js/app.classes.js"></script>
	<script src="js/app.controllers.js"></script>
	<script src="js/app.overlay.js"></script>
	<script src="js/app.translation.js"></script>
</head>

<body>
	<div ng-controller="KeyboardController"></div>

	<div>
		<div id="header">
			<div class="row">
				<div class="col">
					<a class="btn" href="index.html#/files"><i class="zmdi zmdi-chevron-left"></i></a>
				</div>

				<div class="col expand">
					<h5 class="title">SPARQL Query</h5>
				</div>
			</div>
		</div>

		<div id="body-wrapper">
			<div id="body">
				<div id="editor"></div>
			</div>

			<script type="text/javascript">
				$(document).ready(function () {
					// Generate the SPARQL query endpoint with the correct port from the current URI.
					var endpoint = apid.endpointUrl + 'sparql';
					
					console.log(endpoint);

					// Initialize the SPARQL query GUI.
					var yasgui = YASGUI(document.getElementById("editor"));

					for (tab in yasgui.tabs) {
						var t = yasgui.tabs[tab];

						t.persistentOptions.yasqe.sparql.endpoint = endpoint;
						t.yasqe.addPrefixes({
							art: 'http://w3id.org/art/terms/1.0/',
							dc: 'http://purl.org/dc/elements/1.1/',
							prov: 'http://www.w3.org/ns/prov#',
							nie: 'http://www.semanticdesktop.org/ontologies/2007/01/19/nie#',
							nfo: 'http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#'
						});

						console.log('Initialized tab:', t);
					}

					console.log('Loaded YASGUI:', yasgui);

					// Change the position of the 'execute query' button.
					var queryButton = $('.yasqe_queryButton.query_valid');

					queryButton.remove();
					queryButton.find('svg').remove();
					queryButton.append($.parseHTML('<div class="btn"><i class="zmdi zmdi-play"></i></div>'));

					$('.yasr .yasr_header').prepend(queryButton);
				});
			</script>
		</div>
	</div>
</body>

</html>