<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<!-- These targets will fire after mmp creates your bundle but before code signing -->
	<PropertyGroup>
		<CreateAppBundleDependsOn>$(CreateAppBundleDependsOn);CopyOntologies;DownloadPlugins</CreateAppBundleDependsOn>
	</PropertyGroup>

	<UsingTask TaskName="PluginDownloader.DownloadTask" AssemblyFile="$(MSBuildThisFileDirectory)/PluginDownloader.exe" />

	<!-- Since this has inputs/outputs, it will fire only when the inputs are changed or the output does not exist -->
	<Target Name="DownloadPlugins">
		<Message Text="Downloading Plugins..." />

		<DownloadTask Host="https://static.semiodesk.com/artivity/osx/plugins/" TargetDirectory="$(AppBundleDir)\Contents\Resources\Plugins\" />
	</Target>


		<Target Name="CopyOntologies">
			<Message Text="Copying Ontologies..." />
			<CreateItem Include="$(ProjectDir)\$(OutputPath)\Ontologies\*.*">
				<Output TaskParameter="Include" ItemName="Ontologies" />
			</CreateItem>

			<Copy SourceFiles="@(Ontologies)"
					DestinationFolder="$(AppBundleDir)\Contents\Resources\Ontologies\%(RecursiveDir)" />
		</Target>

</Project>
